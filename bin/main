#!/usr/bin/env ruby
require_relative '../lib/gameboard.rb'

class TicTacToe
  def initialize
    
    @board = [' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ']
    @gameboard = GameBoard.new(@board)
  end
  
  def play_board
    puts " #{@board[0]} | #{@board[1]} | #{@board[2]} "
    puts '-----------'
    puts " #{@board[3]} | #{@board[4]} | #{@board[5]} "
    puts '-----------'
    puts " #{@board[6]} | #{@board[7]} | #{@board[8]} "
  end


  def game
    player_move until @gameboard.over?
    if @gameboard.won?
      puts "The winner is #{@gameboard.winner}!"
    elsif @gameboard.draw?
      puts 'It\'s a draw'
    end
  end

  def player_move
    puts 'Enter a number from 1 to 9'
    space_number = gets.strip
    space = @gameboard.selected_space(space_number)
    if @gameboard.valid_input?(space) == true
      @gameboard.play(space, @gameboard.player)
      play_board
    else
      puts 'Invalid move'
      player_move
    end
  end
end

test_game = TicTacToe.new
test_game.game
